(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{665:function(s,a,t){"use strict";t.r(a);var e=t(4),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"zabbix概述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#zabbix概述"}},[s._v("#")]),s._v(" zabbix概述")]),s._v(" "),t("p",[s._v("能够"),t("strong",[s._v("监控")]),s._v("各种网络参数以及"),t("strong",[s._v("服务器健康和完整性")]),s._v("，提供"),t("strong",[s._v("灵活通的知机制")]),s._v("，基于已存储的数据，提供"),t("strong",[s._v("报告")]),s._v("和"),t("strong",[s._v("数据可视化")]),s._v("等功能。")]),s._v(" "),t("h2",{attrs:{id:"基础架构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#基础架构"}},[s._v("#")]),s._v(" 基础架构")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/axcmsm/tmp/raw/master/bigdata/20211018162232.png",alt:""}})]),s._v(" "),t("h2",{attrs:{id:"部署"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#部署"}},[s._v("#")]),s._v(" 部署")]),s._v(" "),t("p",[t("strong",[s._v("规划")]),s._v("：")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("进程")]),s._v(" "),t("th",[s._v("hadoop102节点")]),s._v(" "),t("th",[s._v("hadoop103节点")]),s._v(" "),t("th",[s._v("hadoop104节点")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("zabbix-agent")]),s._v(" "),t("td",[s._v("√")]),s._v(" "),t("td",[s._v("√")]),s._v(" "),t("td",[s._v("√")])]),s._v(" "),t("tr",[t("td",[s._v("zabbix-server")]),s._v(" "),t("td",[s._v("√")]),s._v(" "),t("td"),s._v(" "),t("td")]),s._v(" "),t("tr",[t("td",[s._v("MySQL")]),s._v(" "),t("td",[s._v("√")]),s._v(" "),t("td"),s._v(" "),t("td")]),s._v(" "),t("tr",[t("td",[s._v("zabbix-web")]),s._v(" "),t("td",[s._v("√")]),s._v(" "),t("td"),s._v(" "),t("td")])])]),s._v(" "),t("h3",{attrs:{id:"准备工作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#准备工作"}},[s._v("#")]),s._v(" "),t("strong",[s._v("准备工作")])]),s._v(" "),t("ul",[t("li",[t("p",[s._v("关闭集群")])]),s._v(" "),t("li",[t("p",[s._v("关闭防火墙")])]),s._v(" "),t("li",[t("p",[s._v("关闭selinux")]),s._v(" "),t("blockquote",[t("p",[s._v("因为需要开web页面 而这个页面是用的httpd容器,如果不关闭就无法访问到一些权限，导致页面无法访问")]),s._v(" "),t("p",[s._v("正常情况下，是修改里面的配置文件，而selinux是linux与安全相关的组件，改的东西多，所以需要学，成本高")]),s._v(" "),t("p",[s._v("所以我们这里就直接把他给关闭了，因为主要是给web使用的，所以我们主要管node1节点即可")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/selinux/config\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#修改")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SELINUX")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("disabled\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#重启")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("reboot")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])])])]),s._v(" "),t("li",[t("p",[s._v("配置Zabbix yum源（3台节点）")]),s._v(" "),t("blockquote",[t("p",[t("code",[s._v("/etc/yum.repos.d")]),s._v(" 安装的yum源在这个目录下")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#安装俩个仓库")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -Uvh https://mirrors.aliyun.com/zabbix/zabbix/5.0/rhel/7/x86_64/zabbix-release-5.0-1.el7.noarch.rpm\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y centos-release-scl\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#或者使用脚本集体安装：xcall.sh sudo yum install -y centos-release-scl")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("修改zabbix仓库配置文件")]),s._v(" "),t("blockquote",[t("p",[s._v("主要修改镜像，和web页面的开启。因为国外速度比较慢")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#三台")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/http:\\/\\/repo.zabbix.com/https:\\/\\/mirrors.aliyun.com\\/zabbix/g'")]),s._v(" /etc/yum.repos.d/zabbix.repo\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /etc/yum.repos.d/zabbix.repo \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#开放 node1节点的web服务")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/yum.repos.d/zabbix.repo \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#修改")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("enabled")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])])])]),s._v(" "),t("h3",{attrs:{id:"安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" "),t("strong",[s._v("安装")])]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.zabbix.com/cn/download?zabbix=5.0&os_distribution=centos&os_version=7&db=mysql&ws=apache",target:"_blank",rel:"noopener noreferrer"}},[s._v("官网步骤"),t("OutboundLink")],1)]),s._v(" "),t("ul",[t("li",[t("p",[s._v("安装：（3台）")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#node1节点")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y zabbix-server-mysql zabbix-agent zabbix-web-mysql-scl zabbix-apache-conf-scl\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#node2 node3 节点")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y zabbix-agent\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("blockquote",[t("p",[s._v("删除")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -qa "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" zabbix\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#删除")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum remove 包名\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])])])]),s._v(" "),t("li",[t("p",[s._v("配置Zabbix")]),s._v(" "),t("p",[s._v("创建zabbix数据库")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("mysql -uroot -phadoop -e"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"create database zabbix character set utf8 collate utf8_bin"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("创建zabbix表")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("zcat /usr/share/doc/zabbix-server-mysql-5.0.*/create.sql.gz "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" mysql -uroot -phadoop zabbix\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#如果安装的版本更新了 就替换一下就可以了")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("修改配置文件")]),s._v(" "),t("p",[s._v("配置数据库访问")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#node1节点 配置数据库访问")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/zabbix/zabbix_server.conf\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DBHost")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("node1\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DBName")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("zabbix\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DBUser")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("root\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DBPassword")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("hadoop\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("配置agent：3台")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/zabbix/zabbix_agentd.conf\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#修改")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Server")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("node1\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#ServerActive=127.0.0.1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#Hostname=Zabbix server")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("配置Zabbix_Web时区")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#:node1 节点")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/opt/rh/rh-php72/php-fpm.d/zabbix.conf\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#添加")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("zabbix"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nphp_value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("date.timezone"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Asia/Shanghai\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("启动：默认是80端口")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("#node1\nsudo systemctl start zabbix-server zabbix-agent httpd rh-php72-php-fpm #启动\nsudo systemctl enable zabbix-server zabbix-agent httpd rh-php72-php-fpm #开启自启\n#其他节点\nsudo systemctl start zabbix-agent\nsudo systemctl enable zabbix-agent\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("停止")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("#node1\nsudo systemctl stop zabbix-server zabbix-agent httpd rh-php72-php-fpm\nsudo systemctl disable zabbix-server zabbix-agent httpd rh-php72-php-fpm\n#其他节点\nsudo systemctl stop zabbix-agent\nsudo systemctl disable zabbix-agent\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])])])]),s._v(" "),t("blockquote",[t("p",[s._v("访问：*http://node1/zabbix")])]),s._v(" "),t("blockquote",[t("p",[s._v("next=>next=>填写数据库资料=>填写server地址节点=>next")]),s._v(" "),t("p",[t("strong",[s._v("登录")])]),s._v(" "),t("ul",[t("li",[s._v("用户名：Admin")]),s._v(" "),t("li",[s._v("密码：zabbix")])])]),s._v(" "),t("h2",{attrs:{id:"使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[s._v("#")]),s._v(" 使用")]),s._v(" "),t("p",[t("strong",[s._v("术语")]),s._v("："),t("strong",[s._v("主机、监控项、触发器、动作")])]),s._v(" "),t("p",[s._v("需求：监控每台的datanode节点")]),s._v(" "),t("blockquote",[t("p",[s._v("配置监控项里面的"),t("strong",[s._v("键值")]),t("code",[s._v("proc.num[,,all,datanode]")]),s._v("   (监控的进程)")]),s._v(" "),t("p",[s._v("配置触发器，配置严重性，配置表达式")]),s._v(" "),t("p",[s._v("配置触发后的动作：发通知or执行脚本")]),s._v(" "),t("p",[s._v("web里配置，配置好")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("sbin/stop-dfs.sh #测试 第一台节点\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("h3",{attrs:{id:"模板的使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#模板的使用"}},[s._v("#")]),s._v(" 模板的使用")]),s._v(" "),t("ul",[t("li",[s._v("点击模板 输入参数过滤 例：linux 、mysql 、hadoop等，因为对大数据支持还不够完善。")]),s._v(" "),t("li",[s._v("也可以自己定制模板，创建.")])]),s._v(" "),t("h2",{attrs:{id:"集成grafana"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#集成grafana"}},[s._v("#")]),s._v(" 集成Grafana")]),s._v(" "),t("p",[t("strong",[s._v("它是用来做可视化的工具")])]),s._v(" "),t("h3",{attrs:{id:"部署grafana"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#部署grafana"}},[s._v("#")]),s._v(" 部署Grafana")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("下载Grafana安装包")]),s._v(" "),t("p",[s._v("官方仓库：https://dl.grafana.com/oss/release/grafana-7.4.3-1.x86_64.rpm")]),s._v(" "),t("p",[s._v("国内镜像：https://repo.huaweicloud.com/grafana/7.4.3/grafana-7.4.3-1.x86_64.rpm")])]),s._v(" "),t("li",[t("p",[s._v("上传解压安装包")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#在线下载 #下载到当前目录")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://repo.huaweicloud.com/grafana/7.4.3/grafana-7.4.3-1.x86_64.rpm \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#解压")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -ivh grafana-7.4.3-1.x86_64.rpm\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("blockquote",[t("p",[s._v("缺少依赖问题  先下载依赖 再进行安装")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" fontconfig\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" urw-fonts\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])])]),s._v(" "),t("li",[t("p",[s._v("启动")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("sudo systemctl start grafana-server\nsudo systemctl stop grafana-server #g\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("访问web页面：http://node1:3000/")]),s._v(" "),t("blockquote",[t("p",[s._v("首次登录用户名和密码均为 admin")]),s._v(" "),t("p",[s._v("第二次是设置密码，可跳过，注意。")])])])]),s._v(" "),t("h3",{attrs:{id:"使用步骤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用步骤"}},[s._v("#")]),s._v(" 使用步骤")]),s._v(" "),t("blockquote",[t("p",[s._v("对接数据源、做配置、做图。")])]),s._v(" "),t("ul",[t("li",[t("p",[s._v("添加看板、设置添加数据源（如果没有查找更多，在官网下载）搜索Zabbix 就可以找到下载方式")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("#安装插件\nsudo grafana-cli plugins install alexanderzobnin-zabbix-app\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("#重启\nsudo systemctl restart grafana-server\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("#激活启动插件\n点击plugins，搜索Zabbix，点击enable激活\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("然后重新开始配置数据源即可")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("uri：http://node1/zabbix/api_jsonrpc.php\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#配置基本认证")]),s._v("\nAdmin\nzabbix\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#API细节 也需要填写用户名和密码")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("设置zabbix监控模板"),t("code",[s._v("Template OS Linux by Zabbix agent")]),s._v(" 测试")]),s._v(" "),t("p",[s._v("然后在可视化那里设置查询的分组节点指标即可")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);