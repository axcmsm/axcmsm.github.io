(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{661:function(s,a,t){"use strict";t.r(a);var n=t(4),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"kylin简介"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kylin简介"}},[s._v("#")]),s._v(" Kylin简介")]),s._v(" "),t("p",[t("strong",[s._v("开源分布式分析引擎，"),t("strong",[s._v("提供hadoop/spark之上的")]),s._v("SQL")]),s._v("查询接口及"),t("strong",[s._v("多维分析")]),s._v("(OLAP)的能力。")]),s._v(" "),t("p",[s._v("亚秒(比秒更快一点)级内查询巨大的HIVE表")]),s._v(" "),t("p",[t("strong",[s._v("数仓是BI的核心组件")])]),s._v(" "),t("p",[t("strong",[s._v("BI")]),s._v(":商业智能,将"),t("strong",[s._v("数据")]),s._v("转换成"),t("strong",[s._v("知识")]),s._v("。为企业做决策的工具")]),s._v(" "),t("blockquote",[t("p",[s._v("涉及数仓、联机分析处理(0LAP)、和数据挖掘等技术。")])]),s._v(" "),t("p",[t("strong",[s._v("OLAP")]),s._v(":是种软件技术，可让分析人员"),t("strong",[s._v("从各个方面观察信息")]),s._v("。故称多维分析。")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("类型")]),s._v(" "),t("blockquote",[t("p",[s._v("ROLAP:基于关系型数据库，不需要预计算。")]),s._v(" "),t("p",[s._v("MOLAP:基于多维数据集，需要预计算。")]),s._v(" "),t("p",[s._v("一个多维数据集，称为"),t("strong",[s._v("OLAP Cube")])]),s._v(" "),t("p",[s._v("由多个cuboid组成一个OLAP Cube")])])])]),s._v(" "),t("p",[t("strong",[s._v("kylin对接的就是维度模型")])]),s._v(" "),t("p",[s._v("维度：分析数据的角度")]),s._v(" "),t("p",[s._v("度量：被分析的指标")]),s._v(" "),t("h2",{attrs:{id:"架构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#架构"}},[s._v("#")]),s._v(" 架构")]),s._v(" "),t("ul",[t("li",[s._v("查询层=>路由层=>计算层")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/axcmsm/tmp/raw/master/bigdata/20211017175652.png",alt:""}})]),s._v(" "),t("p",[t("strong",[s._v("特点")])]),s._v(" "),t("ul",[t("li",[t("p",[s._v("提供标准的SQL的接口")])]),s._v(" "),t("li",[t("p",[s._v("支持超大数据集")])]),s._v(" "),t("li",[t("p",[s._v("亚秒级响应")])]),s._v(" "),t("li",[t("p",[s._v("可伸缩性和高吞吐率")])]),s._v(" "),t("li",[t("p",[s._v("BI工具集成")]),s._v(" "),t("blockquote",[t("p",[s._v("例:")]),s._v(" "),t("p",[s._v("ODBC: Tableau、excel、powerBi等")]),s._v(" "),t("p",[s._v("JDBC：Saiku、BIRT等java工具")]),s._v(" "),t("p",[s._v("RestAPI：javaScript、web网页等")])])])]),s._v(" "),t("h2",{attrs:{id:"安装部署"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装部署"}},[s._v("#")]),s._v(" 安装部署")]),s._v(" "),t("p",[s._v("先部署好hadoop、hive、zk、hbase也需要配置好其环境变量")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("上传解压安装包")])]),s._v(" "),t("li",[t("p",[s._v("解决兼容性问题")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("vim find-spark-dependency.sh \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("过滤掉   "),t("em",[t("strong",[s._v("*! -name '*jackson*' ! -name '*metastore*'*")])])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("spark_dependency")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" -L $spark_home/jars -name "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'*.jar'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" -name "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'*slf4j*'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" -name "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'*jackson*'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" -name "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'*metastore*'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" -name "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'*calcite*'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" -name "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'*doc*'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" -name "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'*test*'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" -name "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'*sources*'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v("-printf "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%p:'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/:$//'")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("blockquote",[t("p",[s._v("如果第一次改错了需要把 "),t("code",[s._v("cached-spark-dependency.sh")]),s._v(" 删除 再改才生效")]),s._v(" "),t("p",[s._v("如果环境变量配置错误，需要把bin下面的新生成的sh文件删除 再配置环境变量")])])]),s._v(" "),t("li",[t("p",[s._v("启动 or 关闭")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("bin/kylin.sh start\nbin/kylin.sh stop\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("进程也是runjar")])]),s._v(" "),t("li",[t("p",[s._v("端口是：7070/kylin")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("用户名为：ADMIN，密码为：KYLIN\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])]),s._v(" "),t("h2",{attrs:{id:"使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[s._v("#")]),s._v(" 使用")]),s._v(" "),t("h3",{attrs:{id:"计算"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#计算"}},[s._v("#")]),s._v(" 计算")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("对接数据源，选择hive表的状态(前俩个离线，后俩个实时)")]),s._v(" "),t("blockquote",[t("p",[s._v("注意：kylin不能处理hive表中的复杂数据类型(Array,Map,Struct),不管有没有参加计算都不允许。")]),s._v(" "),t("p",[s._v("所以不能直接导带有复杂类型字段的表")])])]),s._v(" "),t("li",[t("p",[s._v("配置预计算规则")]),s._v(" "),t("blockquote",[t("p",[s._v("定义模式、选择维那些维度参与计算")]),s._v(" "),t("p",[s._v("通过历史服务器解决依赖关系")])])]),s._v(" "),t("li",[t("p",[s._v("如何连接到azkaban让azkaban去调度呢？")]),s._v(" "),t("blockquote",[t("p",[t("strong",[s._v("使用resultAPI")]),s._v("(在web页面操作的都能用resultAPI)")]),s._v(" "),t("p",[s._v("可以将构建cube的命令写到脚本中，将脚本交给其调度。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cube_name")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("order_cube\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("do_date")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v(" -d "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'-1 day'")]),s._v(" +%F"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#获取00:00时间戳")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("start_date_unix")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v(" -d "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$do_date")]),s._v(' 08:00:00"')]),s._v(" +%s"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("start_date")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$((")]),s._v("$start_date_unix"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("))")])]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#获取24:00的时间戳")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stop_date")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$((")]),s._v("$start_date"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("86400000")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("))")])]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -X PUT -H "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Authorization: Basic QURNSU46S1lMSU4="')]),s._v(" -H "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Content-Type: application/json'")]),s._v(" -d "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{\"startTime\":'")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$start_date")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("', \"endTime\":'")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$stop_date")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('\', "buildType":"BUILD"}\'')]),s._v(" http://node1:7070/kylin/api/cubes/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$cube_name")]),s._v("/build\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("p",[t("strong",[s._v("命令 --help 查看帮助文档")])])])])]),s._v(" "),t("h3",{attrs:{id:"查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查询"}},[s._v("#")]),s._v(" 查询")]),s._v(" "),t("blockquote",[t("p",[s._v("insight sql查询")])]),s._v(" "),t("h2",{attrs:{id:"cube构建原理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cube构建原理"}},[s._v("#")]),s._v(" Cube构建原理")]),s._v(" "),t("p",[t("strong",[s._v("维度和度量")]),s._v("：观察角度、计算结果")]),s._v(" "),t("p",[t("strong",[s._v("cube和cuboid")]),s._v("：每一种维度组合就是一个Cuboid，16个Cuboid整体就是一个Cube。")]),s._v(" "),t("p",[t("strong",[s._v("构建算法")]),s._v("：")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("逐层构建layer")]),s._v(" "),t("ul",[t("li",[s._v("优点：充分利用MR优点，处理了中间复杂的排序和shuffle工作。"),t("strong",[s._v("慢、稳定")])]),s._v(" "),t("li",[s._v("缺点，当维度较多，mr任务增加需要额外计算资源，未聚合，每轮shuffle工作量大，对hdfs读写多")])]),s._v(" "),t("blockquote",[t("p",[s._v("该算法的效率较低，尤其是当Cube维度数较大的时候。")])])]),s._v(" "),t("li",[t("p",[s._v("快速构建算法 inmem")]),s._v(" "),t("ul",[t("li",[s._v("会利用内存做预聚合，算出所有组合，mr输出的key都不同，见扫mr数量，不需要combiner，"),t("strong",[s._v("快，不稳定")])])])])]),s._v(" "),t("blockquote",[t("p",[s._v("可以让它自动选择，也可以指定")])]),s._v(" "),t("p",[t("strong",[s._v("存储原理")])]),s._v(" "),t("blockquote",[t("p",[s._v("创建维度字典表，真正的值就不会参与运算。")]),s._v(" "),t("p",[s._v("存储Hbase K-V")]),s._v(" "),t("p",[s._v("Cuboid+纬度值")])]),s._v(" "),t("h2",{attrs:{id:"优化手段"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#优化手段"}},[s._v("#")]),s._v(" 优化手段")]),s._v(" "),t("blockquote",[t("p",[s._v("优化计算or查询")])]),s._v(" "),t("p",[t("strong",[s._v("聚合组")]),s._v("：剪枝工具   "),t("strong",[s._v("计算")])]),s._v(" "),t("blockquote",[t("p",[t("strong",[s._v("减掉没有意义的维度组合")])])]),s._v(" "),t("ul",[t("li",[s._v("强制维度：使用不同的强制维度(选择跟该维度依赖相关的值)   A")]),s._v(" "),t("li",[s._v("层级维度：跟层级有关，前后关系，例：时间、地区、部门  ：A=>B")]),s._v(" "),t("li",[s._v("联合维度：将维度看作整体,例：AB")])]),s._v(" "),t("blockquote",[t("p",[s._v("配置在构建cube的第五步")])]),s._v(" "),t("p",[t("strong",[s._v("衍生度")]),s._v("：  "),t("strong",[s._v("减少Cuboid的数量")])]),s._v(" "),t("ul",[t("li",[t("p",[s._v("衍生维度不会参与最终的计算当中。")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("事实表与该维度表中关联的ID外建参与计算")])])]),s._v(" "),t("li",[t("p",[s._v("但查询需将将对应的ID转成具体的维度可能会做个聚合操作，所以，从维度表主键到某个维度表所需的聚合工作量大，不建议使用衍生度")])])]),s._v(" "),t("blockquote",[t("p",[s._v("一般情况可以，不用设置，如果任务量太大才需要设置，因为"),t("strong",[s._v("查的慢")])])]),s._v(" "),t("p",[t("strong",[s._v("Row key 优化")]),s._v("：")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("被用作过滤的维度放在前边。")]),s._v(" ：优化查询")]),s._v(" "),t("li",[t("strong",[s._v("基数大的维度放在基数小的维度前边。")]),s._v("：优化计算")])]),s._v(" "),t("blockquote",[t("p",[s._v("在页面上下拖动调节即可")])]),s._v(" "),t("h2",{attrs:{id:"bi工具集成"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#bi工具集成"}},[s._v("#")]),s._v(" BI工具集成")]),s._v(" "),t("h3",{attrs:{id:"jdbc"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jdbc"}},[s._v("#")]),s._v(" "),t("strong",[s._v("JDBC")])]),s._v(" "),t("ul",[t("li",[t("p",[s._v("依赖")]),s._v(" "),t("div",{staticClass:"language-xml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[s._v("  "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("dependencies")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("org.apache.kylin"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("kylin-jdbc"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("3.0.2"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("dependencies")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])])])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('\n        //Kylin_JDBC 驱动\n        String KYLIN_DRIVER = "org.apache.kylin.jdbc.Driver";\n\n        //Kylin_URL\n        String KYLIN_URL = "jdbc:kylin://node1:7070/gmall";\n\n        //Kylin的用户名\n        String KYLIN_USER = "ADMIN";\n\n        //Kylin的密码\n        String KYLIN_PASSWD = "KYLIN";\n\n        //添加驱动信息\n        Class.forName(KYLIN_DRIVER);\n\n        //获取连接\n        Connection connection = DriverManager.getConnection(KYLIN_URL, KYLIN_USER, KYLIN_PASSWD);\n\n        //预编译SQL\n        PreparedStatement ps = connection.prepareStatement("select dp.region_name,sum(sku_num) from dwd_order_detail od join dim_base_province dp on od.province_id=dp.id group by dp.region_name");\n\n        //执行查询\n        ResultSet resultSet = ps.executeQuery();\n\n        //遍历打印\n        while (resultSet.next()) {\n            System.out.println(resultSet.getString(1)+":"+resultSet.getLong(2));\n        }\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br")])]),t("h3",{attrs:{id:"zepplin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#zepplin"}},[s._v("#")]),s._v(" "),t("strong",[s._v("Zepplin")])]),s._v(" "),t("ul",[t("li",[t("p",[s._v("上传解压安装包")])]),s._v(" "),t("li",[t("p",[s._v("启动")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v(" bin/zeppelin-daemon.sh start\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("访问 web页面 端口 默认 8080")]),s._v(" "),t("blockquote",[t("p",[s._v("zk在3.5后会在leader节点占用8080端口")]),s._v(" "),t("p",[s._v("所以需要修改一下端口号")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("mv /opt/module/zeppelin/conf/zeppelin-site.xml.template /opt/module/zeppelin/conf/zeppelin-site.xml\n\nvim zeppelin-site.xml\n\n<property>\n  <name>zeppelin.server.port</name>\n  <value>9090</value>\n  <description>Server port.</description>\n</property>\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])])])]),s._v(" "),t("li",[t("p",[s._v("在页面配置kylin的数据源修改一下项目和主机就可以了")])]),s._v(" "),t("li",[t("p",[s._v("步骤：")]),s._v(" "),t("blockquote",[t("p",[s._v("对接数据源=>写sql=>选择图表报表，还可以下载等操作。")])])])])])}),[],!1,null,null,null);a.default=e.exports}}]);