(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{657:function(s,a,e){"use strict";e.r(a);var n=e(4),t=Object(n.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"æ¦‚è¿°"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#æ¦‚è¿°"}},[s._v("#")]),s._v(" æ¦‚è¿°")]),s._v(" "),e("p",[s._v("kafkaæ˜¯åˆ†å¸ƒå¼åŸºäºŽçš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œ"),e("strong",[s._v("å®žæ—¶å¤„ç†")])]),s._v(" "),e("h2",{attrs:{id:"å…¥é—¨"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#å…¥é—¨"}},[s._v("#")]),s._v(" å…¥é—¨")]),s._v(" "),e("ul",[e("li",[s._v("ç‰¹ç‚¹")]),s._v(" "),e("li",[s._v("å‘å¸ƒè®¢é˜…æ¨¡å¼\n"),e("ul",[e("li",[s._v("æ¶ˆè´¹è€…æ‹‰å–ï¼ˆæ¯”è¾ƒè´¹æ”¯æ´ï¼Œç»´æŠ¤é•¿æ—¶è½®è¯¢ï¼‰")]),s._v(" "),e("li",[s._v("ç®¡é“ä¸»åŠ¨æŽ¨é€ (æ¶ˆè´¹è€…å¤„ç†ä¸å³)")])])])]),s._v(" "),e("h2",{attrs:{id:"æž¶æž„ðŸ’¨ðŸ’¨"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#æž¶æž„ðŸ’¨ðŸ’¨"}},[s._v("#")]),s._v(" æž¶æž„ðŸ’¨ðŸ’¨")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://gitee.com/axcmsm/tmp/raw/master/bigdata/20210917174303.png",alt:""}})]),s._v(" "),e("ul",[e("li",[s._v("ç”Ÿäº§è€…æ¶ˆæ¯")]),s._v(" "),e("li",[s._v("kakfaé›†ç¾¤ç®¡ç†æ¶ˆæ¯ï¼ˆborkerä¸»æœºï¼Œä¸»é¢˜ï¼Œåˆ†ç±»ï¼Œåˆ†åŒº(æé«˜é¬“å‘åº¦),å°å¼Ÿç”¨æ¥å¤‡ä»½å‰¯æœ¬æ ‘ç®—ä¸Šè€å¤§ ï¼‰")]),s._v(" "),e("li",[s._v("æ¶ˆè´¹è€…æ¶ˆè´¹ä¿¡æ¯ï¼ˆæ¶ˆè´¹è€…ç»„ï¼Œæ¶ˆè´¹è€…(æŸä¸ªåˆ†åŒºåªèƒ½ç”±"),e("strong",[s._v("åŒç»„")]),s._v("å…¶ä¸­ä¸€ä¸ªæ¶ˆè´¹)")]),s._v(" "),e("li",[s._v("zookeeper(ç®¡ç†æ³¨å†Œä¿¡æ¯)")])]),s._v(" "),e("blockquote",[e("p",[s._v("åœ¨0.9ä¹‹å‰offset(æ¶ˆæ¯åç§»é‡)å­˜å‚¨åœ¨zkä¸­")]),s._v(" "),e("p",[s._v("0.9ä¹‹åŽå­˜å‚¨åœ¨æœ¬åœ°kafka(ç³»ç»Ÿçš„)")]),s._v(" "),e("p",[s._v("ä¸»è¦æ˜¯è®°å½•æ¶ˆè´¹ä½ç½®ï¼Œé˜²æ­¢æŒ‚æŽ‰")]),s._v(" "),e("p",[s._v("æ¶ˆè´¹è€…æ˜¯ä»¥æ‹‰å–èŽ·å–æ¨¡å¼(é€Ÿåº¦å¿«,è¦è·Ÿzkæ‰“äº¤é“,æ‰€ä»¥å¤ªè¿‡é¢‘ç¹äº†ï¼Œé«˜å¹¶å‘)")]),s._v(" "),e("p",[s._v("æ‰€ä»¥å­˜å‚¨åˆ°kafkaæœ¬åœ°é‡Œé¢ï¼Œkafkaé»˜è®¤å­˜æ¶ˆæ¯åœ¨ç£ç›˜(é»˜è®¤ä¿ç•™7å¤©(168å°æ—¶))")])]),s._v(" "),e("h2",{attrs:{id:"å®‰è£…éƒ¨ç½²"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#å®‰è£…éƒ¨ç½²"}},[s._v("#")]),s._v(" å®‰è£…éƒ¨ç½²")]),s._v(" "),e("p",[s._v("é›†ç¾¤è§„åˆ’ï¼š3å°zk 3å°kafka")]),s._v(" "),e("p",[s._v("ä¿®æ”¹:serviceé…ç½®æ–‡ä»¶ æŠŠborck.idæ”¹æˆä¸ºå”¯ä¸€ ç„¶åŽåˆ†å‘é›†ç¾¤")]),s._v(" "),e("p",[s._v("å¯åŠ¨  -daemonè¡¨ç¤ºä»¥å®ˆæŠ¤è¿›ç¨‹æ¥å¯åŠ¨")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("/opt/module/kafka/bin/kafka-server-start.sh -daemon /opt/module/kafka/config/server.properties\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("strong",[s._v("å‘½ä»¤è¡Œæ“ä½œ")]),s._v("ï¼štopicï¼ˆCRUDï¼‰")]),s._v(" "),e("ul",[e("li",[s._v("--list æŸ¥çœ‹")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("./bin/kafka-topics.sh --list --zookeeper hadoop111:2181\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ul",[e("li",[e("p",[s._v("å¾€zké‡Œåˆ›å»ºæ•°æ® --create  éœ€è¦æŒ‡å®štopicä¸»é¢˜ partitionsåˆ†åŒºä¸ªæ•°  å‰¯æœ¬ä¸ªæ•°replication-factor")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("./bin/kafka-topics.sh --create --zookeeper hadoop111:2181 --topic first --partitions 2 --replication-factor 2\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("blockquote",[e("p",[s._v("ç„¶åŽæŸ¥çœ‹åœ¨ä½ é…ç½®çš„logsç›®å½•é‡Œ å°±å¯ä»¥æŸ¥çœ‹åˆ°åˆ›å»ºçš„ç›®å½•äº† æ‰€ä»¥æ˜¯æ”¾åœ¨ç£ç›˜çš„")]),s._v(" "),e("p",[s._v("è€Œä¸”å­˜æ”¾ç›®å½•å ç”±ä¸»é¢˜+åˆ†åŒºæž„æˆ,å¯åŠ¨æ—¥å¿—åˆ°server.logæŸ¥çœ‹")]),s._v(" "),e("p",[s._v("é»˜è®¤æ˜¯50ä¸ªåˆ†åŒº ä¸€ä¸ªå‰¯æœ¬")])])]),s._v(" "),e("li",[e("p",[s._v("-deteleåˆ é™¤")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v(" ./bin/kafka-topics.sh --delete --zookeeper hadoop111:2181 --topic first\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("blockquote",[e("p",[s._v("å¦‚æžœè®¾ç½®äº†"),e("code",[s._v("delete.topic.enable ä¸ºtrue")]),s._v(" æ‰èƒ½çœŸæ­£åˆ é™¤")])])]),s._v(" "),e("li",[e("p",[s._v("describe æŸ¥çœ‹ç»“æž„è¯¦ç»†ä¿¡æ¯")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("./bin/kafka-topics.sh --describe --topic first --zookeeper hadoop111:2181\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\nTopic:first\tPartitionCount:2\tReplicationFactor:2\tConfigs:\n\tTopic: first\tPartition: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\tLeader: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\tReplicas: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2,1")]),s._v("\tIsr: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2,1")]),s._v("\n\tTopic: first\tPartition: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\tLeader: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\tReplicas: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3,2")]),s._v("\tIsr: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3,2")]),s._v("\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])])])]),s._v(" "),e("p",[e("strong",[s._v("ç”Ÿäº§è€…æ¶ˆè´¹è€…")]),s._v("ï¼š"),e("code",[s._v("console-producer.shç”Ÿäº§è€… ``console-consumer.shæ¶ˆè´¹è€…")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v(" #ç”Ÿäº§è€…9092ç«¯å£ ä¸»é¢˜topic åŒºåŸŸbroker\n ./bin/kafka-console-producer.sh --topic first --broker-list hadoop111:9092\n #æ¶ˆè´¹è€…\n è€ç‰ˆæœ¬æ˜¯è¿žæŽ¥åˆ°zk,0.9ç‰ˆæœ¬åŽæ˜¯å­˜å‚¨åˆ°æœ¬åœ°\n./bin/kafka-console-consumer.sh --topic first --zookeeper  hadoop111:2181 #è€ç‰ˆæœ¬\n./bin/kafka-console-consumer.sh --topic first --zookeeper  hadoop111:2181 --from-beginning è¡¨ç¤ºä»Žå¼€å¤´çš„ç®¡é“å¼€å§‹èŽ·å–\n\n#æ–°ç‰ˆå¯åŠ¨ æ¶ˆæ¯å­˜å‚¨æœ¬åœ°kafka,è€Œkafkaå­˜å‚¨åˆ°logsä¸­çš„ä¸»é¢˜offsetåç§»é‡\n./bin/kafka-console-consumer.sh --topic first --bootstrap-server  hadoop111:9092\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("p",[s._v("åˆ é™¤æ•°æ®é™¤äº†åˆ é™¤kafkaå­˜å‚¨ä¿¡æ¯çš„ç›®å½•è¿˜è¦åˆ é™¤zkä¸­å­˜å‚¨çš„ä½ç½®ä¿¡æ¯zookeeperæ˜¯é»˜è®¤ç›®å½•")]),s._v(" "),e("p",[s._v("é‡è£…zkæ•°æ®(æ…Žé‡)")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[hadoop101@axcmsm111 zkData]$ ll\næ€»ç”¨é‡ 8\n-rw-rw-r--. 1 hadoop101 hadoop101   2 9æœˆ   4 17:36 myid #\ndrwxrwxr-x. 2 hadoop101 hadoop101 162 9æœˆ  15 12:04 version-2 #æ•°æ®ä¿¡æ¯\n-rw-rw-r--. 1 hadoop101 hadoop101   4 9æœˆ  15 12:04 zookeeper_server.pid #è¿›ç¨‹\n[hadoop101@axcmsm112 zkData]$ rm -rf version-2/  #åˆ é™¤æ‰€æœ‰æ•°æ®\n#é‡å¯æŸ¥çœ‹\n[zk: localhost:2181(CONNECTED) 0] ls /\n[zookeeper]\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("p",[s._v("å·¥ä½œæµç¨‹ï¼š")]),s._v(" "),e("p",[s._v("ç”Ÿäº§è€…ç”Ÿæˆæ•°æ®ï¼Œå‘é€åˆ°kafkaæœºå™¨,æœºå™¨ä¸­çš„æ¯å°æœºå™¨ï¼Œéƒ½æœ‰ä¸€ä¸ªleaderä¸»é¢˜,é‡Œé¢ç”±åˆ†åŒºï¼Œæ¶ˆè´¹è€…æ¶ˆè´¹æ—¶å­˜å‚¨çš„offsetåç§»é‡é»˜è®¤ä»Ž0å¼€å§‹,è¿˜æœ‰å¯¹åº”çš„å‰¯æœ¬,ä¸”å‰¯æœ¬å°å¼Ÿä¸€èˆ¬è·¨æœºå™¨æ”¾ç½®,ä¸ç„¶æ²¡æ„ä¹‰ã€‚ç„¶åŽå†åˆ°æ¶ˆè´¹è€…ç»„å¯¹å…¶ç›¸åº”çš„æœºå™¨ä¸»é¢˜æ¥æ‹‰å–æ•°æ®ã€‚(éƒ½æ˜¯é¢å‘ä¸»é¢˜çš„topicé€»è¾‘æ¦‚å¿µ) å› ä¸ºå®žé™…å­˜å‚¨æ–‡ä»¶æ˜¯ä¸»é¢˜+åˆ†åŒºå·çš„æ–‡ä»¶")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://gitee.com/axcmsm/tmp/raw/master/bigdata/image-20210915205600566.png",alt:""}})]),s._v(" "),e("p",[s._v("ä¸èƒ½ä¿è¯å…¨å±€æœ‰åºï¼Œåªèƒ½ä¿è¯åŒºå†…æœ‰åº")]),s._v(" "),e("p",[s._v("å­˜å‚¨æ•°æ®çš„æ–‡ä»¶: é‡‡ç”¨"),e("strong",[s._v("åˆ†ç‰‡")]),s._v("å’Œ"),e("strong",[s._v("ç´¢å¼•")]),s._v("çš„å¤„ç†æœºåˆ¶  (è™½ç„¶å­˜å‚¨åˆ°ç£ç›˜å½“ä¸­,ä½†åˆ©ç”¨ç´¢å¼•äºŒåˆ†æŸ¥æ‰¾è¿˜æ˜¯æŒºå¿«çš„)")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[hadoop101@axcmsm111 first-0]$ ll\næ€»ç”¨é‡ 0\n-rw-rw-r--. 1 hadoop101 hadoop101 10485760 9æœˆ  15 21:04 00000000000000000000.index\n-rw-rw-r--. 1 hadoop101 hadoop101        0 9æœˆ  15 21:04 00000000000000000000.log\n-rw-rw-r--. 1 hadoop101 hadoop101 10485756 9æœˆ  15 21:04 00000000000000000000.timeindex\n-rw-rw-r--. 1 hadoop101 hadoop101        0 9æœˆ  15 21:04 leader-epoch-checkpoint\n#é»˜è®¤logé»˜è®¤è®¾ç½®çš„å¤§å°æ˜¯1G è¶…è¿‡å°±ä¼šåˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶\nxxx.log åªå­˜æ•°æ®  \nxxx.index è®°å½•logç´¢å¼•ä¾¿æ–°å»ºæ–‡ä»¶æ—¶ç»§ç»­è¾“å…¥\nå‰é¢çš„xxxæ˜¯è®°å½•å½“å‰æ–‡ä»¶çš„æœ€å°åç§»é‡\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("p",[e("strong",[s._v("åˆ†åŒºç­–ç•¥")]),s._v(":")]),s._v(" "),e("p",[s._v("æ•°æ®å°è£…æˆprodgeerRecordå¯¹è±¡å‘é€")]),s._v(" "),e("p",[s._v("å¯æŒ‡å®šåˆ†åŒºå·ã€ä¸»é¢˜ã€å¤´ä¿¡æ¯ç­‰,å¦‚æžœè¾“å…¥kvçš„è¯kä½œä¸ºhash%%ä¸»é¢˜çš„åˆ†åŒºä¸ªæ•°å¾—åˆ°åˆ†åŒºå€¼ï¼Œä»€ä¹ˆéƒ½ä¸æŒ‡å®šï¼Œå°±è¿›è¡Œè½®è¯¢")]),s._v(" "),e("p",[e("strong",[s._v("æ•°æ®å¯é æ€§")]),s._v(":ISR(åŒæ­¥é˜Ÿåˆ—)")]),s._v(" "),e("p",[s._v("é€šè¿‡è§„å®šå®Œæˆç›¸åº”çš„æœºå™¨é˜Ÿåˆ—ï¼ˆæ—¶é—´ï¼‰ï¼Œå°±å¯ä»¥å‘é€æ•°æ®,å¦‚æžœleateræŒ‚äº† ç›´æŽ¥åœ¨é˜Ÿåˆ—é‡Œé€‰leater")]),s._v(" "),e("p",[s._v("é˜Ÿåˆ—é€‰ä¸¾ç§»é™¤äº†æ¡æ•°é€‰é¡¹,isrå å†…å­˜,è€Œä¸”æ˜¯æ‰¹æ¬¡çš„,æ‰€ä»¥è€é˜Ÿå‘˜ä¼šè¢«è¸¢å‡ºæ¥ï¼Œå†é€‰ä¸¾å†è¿›å…¥,é¢‘ç¹æ“ä½œisr,zkè€—è´¹èµ„æº")]),s._v(" "),e("p",[s._v("ack"),e("strong",[s._v("åº”ç­”æœºåˆ¶")]),s._v(":æä¾›äº†ä¸‰ç§çº§åˆ« æ ¹æ®å¯é æ€§å’Œæ¼”å‡ºè¿›è¡Œæƒè¡¡")]),s._v(" "),e("ul",[e("li",[s._v("acks: 0ä¸ç­‰å¾… 1ç­‰å¾…leater  all(-1) ç­‰å¾…leaterå’Œisré‡Œé¢çš„(å½“isråŒæ­¥å®Œæ•°æ®è¿˜æ¯å‘ackæ—¶leaderæŒ‚äº†ä¼šé‡æ–°é€‰ä¸¾ï¼Œé‡æ–°å‘é€æ•°æ®ï¼Œé€ æˆæ•°æ®é‡å¤)")]),s._v(" "),e("li",[s._v("ä¸€è‡´æ€§ï¼šHWï¼ˆé«˜åŒ¹é… æ¶ˆè´¹ä¸€è‡´æ€§ï¼‰leoï¼ˆæœ€åŽä¸€ä¸ªoffset å­˜å‚¨ä¸€è‡´æ€§ï¼‰:hwä¹‹å‰æ‰å¯¹æ¶ˆè´¹è€…å¯è§,ä¸ç„¶çš„ç”¨offsetçš„è¯ä¼šæŠ¥é”™")])]),s._v(" "),e("p",[e("strong",[s._v("EXACTLYonce")]),s._v("  ç²¾å‡†ä¸€æ¬¡æ€§æ¶ˆè´¹ï¼ˆä¸é‡å¤ï¼Œä¸ä¸¢å¤±ï¼‰")]),s._v(" "),e("ul",[e("li",[s._v("æœ€å°‘ä¸€æ¬¡+å¹‚ç­‰æ€§=ç²¾å‡†ä¸€æ¬¡æ€§")]),s._v(" "),e("li",[s._v("å¼€å¯å¹‚ç­‰æ€§ é»˜è®¤ackä¸º-1, ç”¨pid,åˆ†åŒº,åˆ‡ç‰‡ä½ç½®è¿›è¡Œç¼“å­˜")]),s._v(" "),e("li",[s._v("åªèƒ½è§£å†³å•ä¸ªä¼šè¯ï¼Œå•æ¬¡åˆ†åŒºçš„æ•°æ®é‡å¤é—®é¢˜(é‡å¯ä¸è¡Œ )")])]),s._v(" "),e("p",[e("strong",[s._v("æ¶ˆè´¹è€…")])]),s._v(" "),e("p",[s._v("consumeré‡‡ç”¨pullåˆ°brokerä¸­è¯»å–æ•°æ®")]),s._v(" "),e("p",[e("strong",[s._v("åˆ†åŒºåˆ†é…ç­–ç•¥")]),s._v("ï¼šå¯åŒæ—¶æ¶ˆè´¹ä¸€ä¸ª,å¤šä¸ªä¸»é¢˜ï¼Œä¸èƒ½åŒæ—¶æ¶ˆè´¹ä¸€ä¸ªåˆ†åŒº")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("è½®è¯¢ RoundRobin (æŠŠæ¶ˆè´¹è€…ç¥–é‡Œé¢çš„æ‰€æœ‰ä¸»é¢˜å½“ä½œä¸€ä¸ªä¸»é¢˜ï¼Œè¿›è¡Œè½®è¯¢)   æŒ‰ç…§ç»„åˆ’åˆ†")]),s._v(" "),e("blockquote",[e("p",[s._v("æ‰€ä»¥éœ€è¦å‰ææ¡ä»¶ä¿è¯å½“å‰æ¶ˆè´¹è€…ç»„é‡Œçš„æ¶ˆè´¹è€…è®¢é˜…çš„ä¸»é¢˜çš„ä¸€æ ·çš„")])])]),s._v(" "),e("li",[e("p",[s._v("èŒƒå›´ Rangeï¼ˆé»˜è®¤ï¼‰ æŒ‰ç…§å•ä¸ªä¸»é¢˜åˆ’åˆ†çš„")])])]),s._v(" "),e("p",[s._v("å½“æ¶ˆè´¹è€…ç»„é‡Œé¢æ•°é‡å‘é€å˜åŒ–å°±ä¼šè§¦å‘é‡æ–°åˆ†é…")]),s._v(" "),e("p",[e("strong",[s._v("offsetç»´æŠ¤")])]),s._v(" "),e("p",[s._v("ä¿å­˜åˆ°zk ç»„ ä¸»é¢˜ åˆ†åŒº")]),s._v(" "),e("p",[e("strong",[s._v("äº‹åŠ¡")]),s._v("ï¼š(ç”Ÿäº§è€…)ç»“åˆå¹‚ç­‰æ€§ è§£å†³ç²¾å‡†ä¸€æ¬¡å†™å…¥kafkaé›†ç¾¤,åŠ ä¸Šäº‹åŠ¡èƒ½ä¿è¯è·¨åˆ†åŒº")]),s._v(" "),e("h2",{attrs:{id:"apiâ­•â­•"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#apiâ­•â­•"}},[s._v("#")]),s._v(" APIâ­•â­•")]),s._v(" "),e("p",[e("strong",[s._v("ç”Ÿäº§è€…")]),s._v(":å¼‚æ­¥å‘é€ ä¿©ä¸ªçº¿ç¨‹ mainå’Œsenderçº¿ç¨‹ã€å…±äº«å˜é‡çº¿ç¨‹RecordAccomalator")]),s._v(" "),e("ul",[e("li",[s._v("åŒæ­¥get")]),s._v(" "),e("li",[s._v("å›žè°ƒå‡½æ•°new Callback()")]),s._v(" "),e("li",[s._v("è‡ªå®šä¹‰æ‹¦æˆªå™¨")])]),s._v(" "),e("p",[e("strong",[s._v("æ¶ˆè´¹è€…")]),s._v("ï¼š")]),s._v(" "),e("ul",[e("li",[s._v("è‡ªåŠ¨æå–offset")]),s._v(" "),e("li",[s._v("æ‰‹åŠ¨æäº¤offset")]),s._v(" "),e("li",[s._v("è‡ªå®šä¹‰å­˜å‚¨offset")])]),s._v(" "),e("h2",{attrs:{id:"å¯¹æŽ¥flume"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#å¯¹æŽ¥flume"}},[s._v("#")]),s._v(" å¯¹æŽ¥Flume")]),s._v(" "),e("p",[e("strong",[s._v("æ­¥éª¤")]),s._v("ï¼š")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("é…ç½®flumeé…ç½®æ–‡ä»¶")]),s._v(" "),e("div",{staticClass:"language-conf line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# define\na1.sources = r1\na1.sinks = k1\na1.channels = c1\n# source\na1.sources.r1.type = exec\na1.sources.r1.command = tail -F -c +0 /opt/module/data/flume.log\na1.sources.r1.shell = /bin/bash -c\n# sink\na1.sinks.k1.type = org.apache.flume.sink.kafka.KafkaSink\na1.sinks.k1.kafka.bootstrap.servers = \nhadoop102:9092,hadoop103:9092,hadoop104:9092\na1.sinks.k1.kafka.topic = first\na1.sinks.k1.kafka.flumeBatchSize = 20\na1.sinks.k1.kafka.producer.acks = 1\na1.sinks.k1.kafka.producer.linger.ms = 1\n# channel\na1.channels.c1.type = memory\na1.channels.c1.capacity = 1000\na1.channels.c1.transactionCapacity = 100\n# bind\na1.sources.r1.channels = c1\na1.sinks.k1.channel = c1\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br")])])]),s._v(" "),e("li",[e("p",[e("strong",[s._v("å¯åŠ¨")]),s._v(" "),e("strong",[s._v("kafkaIDEA")]),s._v(" "),e("strong",[s._v("æ¶ˆè´¹è€…")])])]),s._v(" "),e("li",[e("p",[e("strong",[s._v("è¿›å…¥")]),s._v(" "),e("strong",[s._v("flume")]),s._v(" "),e("strong",[s._v("æ ¹ç›®å½•ä¸‹ï¼Œå¯åŠ¨")]),s._v(" "),e("strong",[s._v("flume")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v(" bin/flume-ng agent -c conf/ -n a1 -f jobs/flume-kafka.conf\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])]),s._v(" "),e("li",[e("p",[e("strong",[s._v("å‘")]),s._v(" "),e("strong",[s._v("/opt/module/data/flume.log")]),s._v(" "),e("strong",[s._v("é‡Œè¿½åŠ æ•°æ®ï¼ŒæŸ¥çœ‹")]),s._v(" "),e("strong",[s._v("kafka")]),s._v(" "),e("strong",[s._v("æ¶ˆè´¹è€…æ¶ˆè´¹æƒ…å†µ")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" hello "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /opt/module/data/flume.log\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])])])])}),[],!1,null,null,null);a.default=t.exports}}]);